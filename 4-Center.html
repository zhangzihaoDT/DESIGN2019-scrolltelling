<!DOCTYPE html>
<!-- use babel so that we can use arrow functions and other goodness in this block! -->
<script src="//unpkg.com/babel-standalone@6/babel.min.js"></script>

<script src="//unpkg.com/d3@5.5.0"></script>
<script src="//unpkg.com/d3fc@14.0.1"></script>

<style>
#chart {
  width: 100%;
  height: 500px;
}

.x-axis .domain {
  display: none;
}

.bar-label {
  text-anchor: middle;
  font-size: 12px;
  fill: black;
}
</style>

<div id="chart"></div>

<script type='text/babel'>

const isVowel = (letter) => 'AEIOU'.indexOf(letter) !== -1;

var barSeries = fc.autoBandwidth(fc.seriesSvgBar())
    .crossValue(d => d.letter)
		.align('left')
    .mainValue(d => d.frequency)
    .decorate((selection) => {
      selection.select('path')
        .style('fill', d => isVowel(d.letter) ? 'indianred' : 'steelblue');
      
      // selection.enter()
      //   .append('text')
      //   .attr('class', 'bar-label')
      //   .attr('transform', 'translate(0, -5)')
      //   .text(d => d3.format('.1%')(d.frequency));
    });
  
d3.csv("data/changeFq.csv", d => {
    d.frequency = +d.frequency;
    return d;
  }).then(data => {

  var yExtent = fc.extentLinear()
    .accessors([d => d.frequency])
    .pad([0, 0.1])
    .include([0]);

  var chart = fc.chartSvgCartesian(
        d3.scaleBand(),
        d3.scaleLinear()
      )
      .xDomain(data.map(d => d.letter))
      .xPadding(0.2)
      .yDomain(yExtent(data))
      .yTicks(10, '%')
      .yOrient('left')
      .plotArea(barSeries);

  d3.select('#chart')
      .datum(data)
      .call(chart);
});
</script>
